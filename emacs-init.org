#+TITLE:     Emacs Initialization File
#+AUTHOR:    Howard Abrams
#+EMAIL:     howard.abrams@gmail.com
#+DATE:      2013-03-21 Thu

Loading this file will bring a clean Emacs instance up to a point
where all the supporting packages it needs are installed and ready.

To use it simply =M-x= this: =load-library ~/.emacs.d/init.el=

This can be done after this file has been tangled: =C-c C-v t=

#+BEGIN_SRC elisp
;; NB! This file was generated, so don't edit the .el file.
;;     Instead, edit and tangle the original org-mode file at
;;     ~/Dropbox/dot-files/emacs-init.org
#+END_SRC

* Packages

  Using the standard package library that comes with v24:

#+BEGIN_SRC elisp
  (require 'package)
#+END_SRC

** Repository Setup

   The packages I like come from many sources, and this lists these
   repository locations:

#+BEGIN_SRC elisp
  (setq package-archives '(("org"       . "http://orgmode.org/elpa/")
                           ("gnu"       . "http://elpa.gnu.org/packages/")
                           ("melpa"     . "http://melpa.milkbox.net/packages/")
                           ("tromey"    . "http://tromey.com/elpa/")
                           ("marmalade" . "http://marmalade-repo.org/packages/")))
#+END_SRC

   Before we can load new packages, we need to get the list of
   available packages:

#+BEGIN_SRC elisp
  (package-initialize)
  
  (when (not package-archive-contents)
    (package-refresh-contents))
#+END_SRC

** Package Selection

   Now we can grab anything we like!

#+BEGIN_SRC elisp
  (defvar my-packages '(
                        ac-nrepl
                        auto-complete
                        clojure-mode
                        clojurescript-mode
                        coffee-mode
                        color-theme
                        color-theme-sanityinc-tomorrow
                        elein
                        flymake
                        flymake-jshint
                        flyspell
                        git-commit-mode
                        gitconfig-mode
                        gitignore-mode
                        graphviz-dot-mode
                        handlebars-mode
                        htmlize
                        js-comint
                        js2-mode
                        json-mode
                        mac-key-mode
                        magit
                        magit-simple-keys
                        markdown-mode
                        mustache-mode
                        nlinum
                        nrepl
                        nrepl-ritz          ;; For debugging Clojure
                        org
                        org-mime
                        org-presie
                        paredit
                        plantuml-mode
                        projectile          ;; For dealing with projects
                        rainbow-delimiters  ;; Mode for alternating paren colors
                        redo+
                        scala-mode
                        smex
                        yasnippet
                        yasnippet-bundle
                        )
    "A list of packages to ensure are installed at launch.")
#+END_SRC

** Package Installation

   Installs all packages specified.
   This is /idempotent/ in that we can call this anytime to install
   anything not already installed.

#+BEGIN_SRC elisp
  (dolist (p my-packages)
    (when (not (package-installed-p p))
      (package-install p)))
#+END_SRC

* A different attempt

  I found the following code that might be helpful:

#+BEGIN_SRC elisp :tangle no
    (unless package-archive-contents
      (package-refresh-contents))
    (dolist (package my-packages)
       (unless (package-installed-p package)
        (package-install package))))
#+END_SRC

* External Dependencies

*** PlantUML

    The [[http://plantuml.sourceforge.net][PlantUML project]] allows you to draw UML diagrams with textual descriptions.
    A sweet feature for literate programmers. Download [[http://plantuml.sourceforge.net/download.html][the Jar file]] and put it in
    your =bin= directory:

#+BEGIN_EXAMPLE
  curl -o ~/bin/plantuml.jar http://sourceforge.net/projects/plantuml/files/plantuml.jar/download
#+END_EXAMPLE

    We then need to reference this Jar file:

#+BEGIN_SRC elisp
  (setq org-plantuml-jar-path (concat (getenv "HOME") "/bin/plantuml.jar"))
#+END_SRC

*** Org-Mode Installation

    The [[http://orgmode.org][org-mode]] program is so critical, that I want a version > 7.9.
    Download a version and un-pack it in =~/.emacs.d= and create a
    symlink to it called: =~/.emacs.d/org=

    From this point, we expect this it to be in this spot.

*** Ensime Installation

    [[https://github.com/aemoncannon/ensime][Ensime]] is an enhanced mode for Scala. Complete instructions are
    on the github page, but it amounts to 

    - [[https://github.com/aemoncannon/ensime/downloads][Download a distribution]]
    - Positioning: =cd ~/.emacs=
    - Extracting: =tar xvf ~/Downloads/ensime_2.9.2-0.9.8.1.tar= (or equivalent)
    - Symlinking: =ln -s ensime_2.9.2-0.9.8.1 ensime=

    That should do 'er.

*** JavaScript Lint

    Assuming that you have [[http://nodejs.org][node.js]] installed, you should install
    [[http://www.jshint.com][jshint]] as a global command:

#+BEGIN_EXAMPLE
  sudo npm -g install jshint
#+END_EXAMPLE

    Now you can customize the [[*JavaScript][JavaScript]] section.

**** Checking out the Ensime Source Code

     You could check out the ensime source code and compiling a
     version. As long as we have a =~/.emacs.d/ensime/elisp= that we
     can load, we are golden...

#+BEGIN_EXAMPLE
  git clone https://github.com/aemoncannon/ensime.git
  cd ~/.emacs.d/ensime
  ln -s dist_2.9.2/elisp .
#+END_EXAMPLE

*** ISpell

    The spelling feature in Emacs using =ispell=, so this should be
    installed with something like Homebrew:

#+BEGIN_SRC sh :tangle no
brew install ispell
#+END_SRC

*** Support for GMAIL

    While reading email in Emacs is generally "fine", I like to use
    it because I can create direct links between my notes and the
    mail messages I get.

    To send email through Gmail, you'll need the TLS package
    installed. Using [[http://mxcl.github.com/homebrew/][Homebrew]] is simple enough:

#+BEGIN_SRC sh :tangle no
  brew install gnutls
#+END_SRC

* Technical Artifacts

  Before you can build this on a new system, make sure that you put
  the cursor over any of these properties, and hit: =C-c C-c=

#+DESCRIPTION: File to be run once with a fresh Emacs instance
#+PROPERTY:    results silent
#+PROPERTY:    tangle ~/.emacs.d/init.el
#+PROPERTY:    eval no-export
#+PROPERTY:    comments org
#+OPTIONS:     num:nil toc:nil todo:nil tasks:nil tags:nil
#+OPTIONS:     skip:nil author:nil email:nil creator:nil timestamp:nil
#+INFOJS_OPT:  view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
